<div class="bg-white p-6 rounded-xl border border-ash-grey-200 shadow-sm w-full">
    <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 gap-4">
        
        <div>
            <h3 id="chartTitle" class="font-bold text-midnight-violet-900 text-lg">Analýza dat</h3>
            <p class="text-xs text-silver-500">Vývoj hodnot v čase</p>
        </div>
        
        <div class="flex flex-wrap items-center gap-4 sm:gap-6">
            
            <div class="flex items-center gap-3">
                <label class="flex items-center gap-1 cursor-pointer">
                    <input type="radio" name="chartMetric" value="avg" checked onchange="updateChartMetric()" class="accent-vintage-grape-600 w-3 h-3">
                    <span class="text-xs text-gray-700">Avg</span>
                </label>
                
                <label class="flex items-center gap-1 cursor-pointer">
                    <input type="radio" name="chartMetric" value="min" onchange="updateChartMetric()" class="accent-blue-500 w-3 h-3">
                    <span class="text-xs text-gray-700">Min</span>
                </label>

                <label class="flex items-center gap-1 cursor-pointer">
                    <input type="radio" name="chartMetric" value="max" onchange="updateChartMetric()" class="accent-red-500 w-3 h-3">
                    <span class="text-xs text-gray-700">Max</span>
                </label>

                <div class="w-[1px] h-3 bg-gray-300 mx-1"></div>

                <label class="flex items-center gap-1 cursor-pointer">
                    <input type="radio" name="chartMetric" value="all" onchange="updateChartMetric()" class="accent-vintage-grape-600 w-3 h-3">
                    <span class="text-xs text-gray-900 font-bold">Vše</span>
                </label>
            </div>

            <div class="flex bg-ash-grey-50 p-1 rounded-lg border border-ash-grey-200">
                <button onclick="updateChart('now'); setActiveRange(this)" 
                    class="range-btn px-3 py-1 text-[10px] font-bold uppercase rounded-md text-silver-500 hover:bg-white/60 transition-all focus:outline-none">
                    30min
                </button>

                <button onclick="updateChart('1h'); setActiveRange(this)" 
                    class="range-btn px-3 py-1 text-[10px] font-bold uppercase rounded-md text-silver-500 hover:bg-white/60 transition-all focus:outline-none">
                    1h
                </button>

                <button onclick="updateChart('24h'); setActiveRange(this)" 
                    class="range-btn px-3 py-1 text-[10px] font-bold uppercase rounded-md bg-white shadow-sm text-vintage-grape-600 transition-all focus:outline-none active-range">
                    24h
                </button>

                <button onclick="updateChart('7d'); setActiveRange(this)" 
                    class="range-btn px-3 py-1 text-[10px] font-bold uppercase rounded-md text-silver-500 hover:bg-white/60 transition-all focus:outline-none">
                    7d
                </button>
            </div>
        </div>
    </div>

    <div class="relative w-full h-[300px]">
        <canvas id="mainChart"></canvas>
    </div>
</div>

<script>
    function setActiveRange(btn) {
        // Reset stylů u všech tlačítek
        const buttons = btn.parentElement.querySelectorAll('.range-btn');
        buttons.forEach(b => {
            b.className = 'range-btn px-3 py-1 text-[10px] font-bold uppercase rounded-md text-silver-500 hover:bg-white/60 transition-all focus:outline-none';
        });
        // Nastavení aktivního stylu
        btn.className = 'range-btn px-3 py-1 text-[10px] font-bold uppercase rounded-md bg-white shadow-sm text-vintage-grape-600 transition-all focus:outline-none active-range';
    }
</script>